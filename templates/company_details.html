{% extends 'base.html' %}
{% load mathfilters %}
{% load humanize %}
{% load static %}

{% block title %} {{ company.company_id }}  {% endblock %}

{% block content %}

<!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">{{ company.name }} ({{ company.company_id }})</h1>
                        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                                class="fas fa-download fa-sm text-white-50"></i> Latest Report</a>
                    </div>

                   <div class="row">

                        <!-- Earnings (Monthly) Card Example -->
                        <div class="col-xl-12 col-md-12 mb-6">
                            <div class="card border-left-primary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">{{ company.isin }}</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                                {{ company.name }}
                                            </div>
                                            <div class="h6 mb-0 font-weight-light text-gray-800">
                                                <strong>{{ company.country.currency_code }} {{ price.price }}
                                                    <small>
                                                        {% if price.price|sub:previous_close.price|div:previous_close.price >= 0 %}
                                                            {% if price.price|sub:previous_close.price|div:previous_close.price > 0 %}
                                                                <span style="font-weight: bold; color: green"><i class="bx bxs-up-arrow-alt"></i>({{price.price|sub:previous_close.price|div:previous_close.price|mul:100|floatformat:2 }}%)</span>
                                                            {% else %}
                                                                <span style="font-weight: bold; color: blue"><i class="bx bxs-right-arrow-alt"></i>({{price.price|sub:previous_close.price|div:previous_close.price|mul:100|floatformat:2 }}%)</span>
                                                            {% endif %}
                                                        {% else %}
                                                            <span style="font-weight: bold; color: red"><i class="bx bxs-down-arrow-alt"></i>({{price.price|sub:previous_close.price|div:previous_close.price|mul:100|floatformat:2 }}%)</span>
                                                        {% endif %}
                                                    </small>
                                                </strong>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <img src="{{ company.logo.url }}" alt="" height="100">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <br>

                    <div class="row">

                        <div class="col-lg-8">

                            <!-- Default Card Example -->
                            <div class="card mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">{{ company.name }} Summary</h6>
                                </div>
                                <div class="card-body text text-center">
                                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                                      <li class="nav-item">
                                        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Profile</a>
                                      </li>
                                      <li class="nav-item">
                                        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Financial Summary</a>
                                      </li>
                                      <li class="nav-item">
                                        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Charts</a>
                                      </li>
                                        <li class="nav-item">
                                        <a class="nav-link" id="technical-tab" data-toggle="tab" href="#technical" role="tab" aria-controls="contact" aria-selected="false">Technical</a>
                                      </li>
                                        </li>
                                        <li class="nav-item">
                                        <a class="nav-link" id="analysis-tab" data-toggle="tab" href="#analysis" role="tab" aria-controls="contact" aria-selected="false">Analysis</a>
                                      </li>
                                        </li>
                                        <li class="nav-item">
                                        <a class="nav-link" id="ownership-tab" data-toggle="tab" href="#ownership" role="tab" aria-controls="contact" aria-selected="false">Ownership</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="ratings-tab" data-toggle="tab" href="#ratings" role="tab" aria-controls="contact" aria-selected="false">Ratings</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content" id="myTabContent">
                                      <div class="tab-pane fade show active pt-5" id="home" role="tabpanel" aria-labelledby="home-tab">
                                        <p>{{ company.summary }}</p>
                                      </div>
                                      <div class="tab-pane fade pt-5" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                          <!-- <p>Financials Here</p> -->
                                          {% if statement %}
                                          <p>Financial Statements for {{statement.file.year}}</p>
                                          <div class="row">
                                            <div class="col-3">
                                              <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                                                <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Income Statement</a>
                                                <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">Balance Sheet</a>
                                                <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false">Cash Flow</a>
                                                <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false">Profitability</a>
                                                <a class="nav-link" id="v-pills-valuation-tab" data-toggle="pill" href="#v-pills-valuation" role="tab" aria-controls="v-pills-valuation" aria-selected="false">Valuations</a>
                                              </div>
                                            </div>
                                            <div class="col-9">
                                              <div class="tab-content" id="v-pills-tabContent">
                                                <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                                                    <table class="table table-striped table-bordered">
                                                        <tr>
                                                            <th></th>
                                                            <th>{{company.country.currency_code}}</th>
                                                        </tr>
                                                        <tr>
                                                            <td>Revenue (m)</td>
                                                            <td class="value">{{statement.total_operating_revenue|div:1000000|intcomma}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Revenue Per Share</td>
                                                            <td class="value">{% for detail in share %}{{ statement.total_operating_revenue|div:detail.issued_shares|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Revenue Growth (%)</td>
                                                            <td class="value">{{statement.total_operating_revenue|sub:previous_revenue.total_operating_revenue|div:previous_revenue.total_operating_revenue|mul:100|floatformat:2}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Gross Profit (m)</td>
                                                            <td class="value">{{statement.gross_profit_ebitda|div:1000000|intcomma}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Net Income (m)</td>
                                                            <td class="value">{{statement.net_profit_loss|div:1000000|intcomma}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Diluted EPS</td>
                                                            <td class="value">{% for detail in share %}{{ statement.net_profit_loss|div:detail.issued_shares|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Earning Growth  (%)</td>
                                                            <td class="value">{{statement.net_profit_loss|sub:previous_revenue.net_profit_loss|div:previous_revenue.net_profit_loss|mul:100|floatformat:2}}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                                                    <table class="table table-striped table-bordered">
                                                        <tr>
                                                            <th></th>
                                                            <th>{{company.country.currency_code}}</th>
                                                        </tr>
                                                        <tr>
                                                            <td>Total Cash (m)</td>
                                                            <td class="value">{{statement.total_cash|div:1000000|intcomma}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Total Cash Per Share</td>
                                                            <td class="value">{% for detail in share %}{{ statement.total_cash|div:detail.issued_shares|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Total Debt (m)</td>
                                                            <td class="value">{{statement.total_liability|div:1000000|intcomma}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Total Debt/ Equity</td>
                                                            <td class="value">{{statement.total_liability|div:statement.total_equity|floatformat:4}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Current Ratio</td>
                                                            <td class="value">{{statement.current_asset|div:statement.current_liability|floatformat:4}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Book Value Per Share</td>
                                                            <td class="value">{% for detail in share %}{{ statement.total_equity|div:detail.issued_shares|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                                                    <table class="table table-striped table-bordered">
                                                        <tr>
                                                            <th></th>
                                                            <th>{{company.country.currency_code}}</th>
                                                        </tr>
                                                        <tr>
                                                            <td>Operating Cash Flow (m)</td>
                                                            <td class="value">{{statement.operating_cash_flow|div:1000000|intcomma}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Levered Free Cash Flow (m)</td>
                                                            <td class="value">{{statement.operating_cash_flow|add:statement.investing_cash_flow|div:1000000|intcomma}}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                                                    <table class="table table-striped table-bordered">
                                                        <tr>
                                                            <th></th>
                                                            <th>%</th>
                                                        </tr>
                                                        <tr>
                                                            <td>Profit Margin</td>
                                                            <td class="value">{{statement.net_profit_loss|div:statement.total_operating_revenue|floatformat:4}}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Operating Margin</td>
                                                            <td class="value">{{statement.operating_profit_ebit|div:statement.total_operating_revenue|floatformat:4}}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="tab-pane fade" id="v-pills-valuation" role="tabpanel" aria-labelledby="v-pills-valuation-tab">
                                                    <table class="table table-striped table-bordered">
                                                        <tr>
                                                            <th></th>
                                                            <th>{{company.country.currency_code}}</th>
                                                        </tr>
                                                        <tr>
                                                            <td>Market Cap (m)</td>
                                                            <td>{{ company.country.currency_code }} {% for detail in share %}{{ detail.issued_shares|mul:price.price|div:1000000|intcomma|floatformat:2 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Enterprise Value (m)</td>
                                                            <td class="value">{{ company.country.currency_code }} {% for detail in share %}{{ detail.issued_shares|mul:price.price|sub:statement.total_cash|div:1000000|floatformat:2|intcomma  }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Trailing P/E </td>
                                                            <td class="value">{% for detail in share %} {{ statement.net_profit_loss|div:detail.issued_shares|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Price/Sales</td>
                                                            <td class="value">{% for detail in share %}{{ detail.issued_shares|mul:price.price|div:statement.total_operating_revenue|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Price/Book</td>
                                                            <td class="value">{% for detail in share %}{{ detail.issued_shares|mul:price.price|div:statement.total_equity|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Enterprise Value/ Revenue</td>
                                                            <td class="value">{% for detail in share %}{{ detail.issued_shares|mul:price.price|sub:statement.total_cash|div:statement.total_operating_revenue|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Enterprise Value/ EBITDA</td>
                                                            <td class="value">{% for detail in share %}{{ detail.issued_shares|mul:price.price|sub:statement.total_cash|div:statement.gross_profit_ebitda|floatformat:4 }}{% endfor %}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        {% else %}
                                            <p>No statement added yet</p>
                                        {% endif %}
                                          
                                      </div>
                                      <div class="tab-pane fade pt-5" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                                        <div class="row">
                                              <div class="col-2">
                                                <div class="nav flex-column nav-pills" id="v-charts" role="tablist" aria-orientation="vertical">
                                                  <button class="nav-link active" id="v-chart-tab" data-toggle="pill" data-target="#v-chart" type="button" role="tab" aria-controls="v-chart" aria-selected="true">Share Price</button>
                                                    <br>
                                                  <button class="nav-link" id="v-candle-tab" data-toggle="pill" data-target="#v-candle" type="button" role="tab" aria-controls="v-candle" aria-selected="false">Candle Sticks</button>
                                                    <br>
                                                  <button class="nav-link" id="v-profit-tab" data-toggle="pill" data-target="#v-profit" type="button" role="tab" aria-controls="v-profit" aria-selected="false">Fin. Statement</button>
                                                </div>
                                              </div>
                                              <div class="col-10">
                                                <div class="tab-content" id="v-chartsContent">
                                                  <div class="tab-pane fade show active" id="v-chart" role="tabpanel" aria-labelledby="v-chart-tab">
                                                        <button id="one_month" type="button">1M</button>
                                                        <button id="six_months" type="button">6M</button>
                                                        <button id="one_year" type="button">1Y</button>
                                                        <button id="ytd" type="button">YTD</button>
                                                        <button id="all" type="button">ALL</button>
                                                        <div id="chart"></div>


                                                      <script>
                                                        const latest_trading_day = '{{share_price_latest.date}}';


                                                        const one_month = '{{one_month}}';


                                                        const six_month = '{{six_month}}';


                                                        const one_year = '{{one_year}}';

                                                        const share_price_first = '{{share_price_first}}';

                                                        const dates = [{% for price in share_price %} Date.parse('{{price.date}}'),{% endfor %}]


                                                        const prices = [{% for price in share_price %} {{price.price}}, {% endfor %}]

                                                        var data = dates.map(function(e, i){
                                                            return [e, prices[i]];
                                                        });

                                                        const series = {
                                                            "dataSeries": {
                                                              "dates": [{% for price in share_price %} '{{price.date|date:"D M, Y" }}', {% endfor %}],
                                                              "prices": [{% for price in share_price %} {{price.price}}, {% endfor %}]
                                                            }
                                                          }

                                                          var options = {
                                                          series: [{
                                                          name: "Share Price",
                                                          data: data
                                                        }],
                                                          chart: {
                                                          id: 'area-datetime',
                                                          type: 'area',
                                                          height: 350,
                                                          zoom: {
                                                            autoScaleYaxis: true
                                                          }
                                                        },
                                                        annotations: {
                                                          yaxis: [{
                                                            y: 30,
                                                            borderColor: '#999',
                                                            label: {
                                                              show: true,
                                                              style: {
                                                                color: "#fff",
                                                                background: '#00E396'
                                                              }
                                                            }
                                                          }],
                                                          xaxis: [{
                                                            x: new Date('{{share_price_first}}').getTime(),
                                                            borderColor: '#999',
                                                            yAxisIndex: 0,
                                                            label: {
                                                              show: true,
                                                              style: {
                                                                color: "#fff",
                                                                background: '#775DD0'
                                                              }
                                                            }
                                                          }]
                                                        },
                                                        dataLabels: {
                                                          enabled: false
                                                        },
                                                        markers: {
                                                          size: 0,
                                                          style: 'hollow',
                                                        },
                                                        xaxis: {
                                                          type: 'datetime',
                                                          min: new Date('{{share_price_first}}').getTime(),
                                                          tickAmount: 6,
                                                        },
                                                        tooltip: {
                                                          x: {
                                                            format: 'dd MMM yyyy',
                                                          }
                                                        },
                                                        fill: {
                                                          type: 'gradient',
                                                          gradient: {
                                                            shadeIntensity: 1,
                                                            opacityFrom: 0.7,
                                                            opacityTo: 0.9,
                                                            stops: [0, 100]
                                                          }
                                                        },
                                                        };

                                                        var chart = new ApexCharts(document.querySelector("#chart"), options);
                                                        chart.render();

                                                        var resetCssClasses = function(activeEl) {
                                                            var els = document.querySelectorAll('button')
                                                            Array.prototype.forEach.call(els, function(el) {
                                                              el.classList.remove('active')
                                                            })

                                                            activeEl.target.classList.add('active')
                                                          }

                                                          document.querySelector('#one_month').addEventListener('click', function(e) {
                                                              resetCssClasses(e)

                                                              chart.zoomX(
                                                                new Date(one_month).getTime(),
                                                                new Date(latest_trading_day).getTime()
                                                              )
                                                            })

                                                          document.querySelector('#six_months').addEventListener('click', function(e) {
                                                              resetCssClasses(e)

                                                              chart.zoomX(
                                                                new Date(six_month).getTime(),
                                                                new Date(latest_trading_day).getTime()
                                                              )
                                                            })

                                                          document.querySelector('#one_year').addEventListener('click', function(e) {
                                                              resetCssClasses(e)
                                                              chart.zoomX(
                                                                new Date(one_year).getTime(),
                                                                new Date(latest_trading_day).getTime()
                                                              )
                                                            })

                                                          document.querySelector('#ytd').addEventListener('click', function(e) {
                                                            resetCssClasses(e)

                                                            chart.zoomX(
                                                              new Date('2023-01-01').getTime(),
                                                              new Date(latest_trading_day).getTime()
                                                            )
                                                          })

                                                          document.querySelector('#all').addEventListener('click', function(e) {
                                                            resetCssClasses(e)

                                                            chart.zoomX(
                                                              new Date(share_price_first).getTime(),
                                                              new Date().getTime(),
                                                            )
                                                          });
                                                      </script>
                                                        <!-- End Area Chart -->
                                                  </div>
                                                  <div class="tab-pane fade" id="v-candle" role="tabpanel" aria-labelledby="v-candle-tab">
                                                        <div id="main" style="width: 850px; height:400px;"></div>
                                                        <script type="text/javascript">
                                                        const date = [{% for price in share_price %} '{{price.date}}',{% endfor %}]


                                                        const price = [{% for price in share_price %} {{price.price}}, {% endfor %}]

                                                        const open = [{% for price in open_price %} {{price.price}}, {% endfor %}]

                                                        data = date.map(function(e, i){
                                                            return [e, open[i], price[i], price[i], price[i]];
                                                        });

                                                        const eg =  ['2013/1/24', 2320.26, 2320.26, 2287.3, 2362.94];

                                                          // Initialize the echarts instance based on the prepared dom
                                                          var myChart = echarts.init(document.getElementById('main'));

                                                          // Specify the configuration items and data for the chart
                                                          const upColor = '#ec0000';
                                                            const upBorderColor = '#8A0000';
                                                            const downColor = '#00da3c';
                                                            const downBorderColor = '#008F28';
                                                            // Each item: open，close，lowest，highest
                                                            const data0 = splitData(
                                                            data
                                                            );
                                                            function splitData(rawData) {
                                                              const categoryData = [];
                                                              const values = [];
                                                              for (var i = 0; i < rawData.length; i++) {
                                                                categoryData.push(rawData[i].splice(0, 1)[0]);
                                                                values.push(rawData[i]);
                                                              }
                                                              return {
                                                                categoryData: categoryData,
                                                                values: values
                                                              };
                                                            }
                                                            function calculateMA(dayCount) {
                                                              var result = [];
                                                              for (var i = 0, len = data0.values.length; i < len; i++) {
                                                                if (i < dayCount) {
                                                                  result.push('-');
                                                                  continue;
                                                                }
                                                                var sum = 0;
                                                                for (var j = 0; j < dayCount; j++) {
                                                                  sum += +data0.values[i - j][1];
                                                                }
                                                                result.push(sum / dayCount);
                                                              }
                                                              return result;
                                                            }
                                                            option = {
                                                              title: {
                                                                text: '',
                                                                left: 0
                                                              },
                                                              tooltip: {
                                                                trigger: 'axis',
                                                                axisPointer: {
                                                                  type: 'cross'
                                                                }
                                                              },
                                                              legend: {
                                                                data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']
                                                              },
                                                              grid: {
                                                                left: '10%',
                                                                right: '10%',
                                                                bottom: '15%'
                                                              },
                                                              xAxis: {
                                                                type: 'category',
                                                                data: data0.categoryData,
                                                                boundaryGap: false,
                                                                axisLine: { onZero: false },
                                                                splitLine: { show: false },
                                                                min: 'dataMin',
                                                                max: 'dataMax'
                                                              },
                                                              yAxis: {
                                                                scale: true,
                                                                splitArea: {
                                                                  show: true
                                                                }
                                                              },
                                                              dataZoom: [
                                                                {
                                                                  type: 'inside',
                                                                  start: 50,
                                                                  end: 100
                                                                },
                                                                {
                                                                  show: true,
                                                                  type: 'slider',
                                                                  top: '90%',
                                                                  start: 50,
                                                                  end: 100
                                                                }
                                                              ],
                                                              series: [
                                                                {
                                                                  name: 'Candle',
                                                                  type: 'candlestick',
                                                                  data: data0.values,
                                                                  itemStyle: {
                                                                    color: upColor,
                                                                    color0: downColor,
                                                                    borderColor: upBorderColor,
                                                                    borderColor0: downBorderColor
                                                                  },
                                                                  markPoint: {
                                                                    label: {
                                                                      formatter: function (param) {
                                                                        return param != null ? Math.round(param.value) + '' : '';
                                                                      }
                                                                    },
                                                                    data: [
                                                                    ],
                                                                    tooltip: {
                                                                      formatter: function (param) {
                                                                        return param.name + '<br>' + (param.data.coord || '');
                                                                      }
                                                                    }
                                                                  },
                                                                  markLine: {
                                                                    symbol: ['none', 'none'],
                                                                    data: [
                                                                      [
                                                                        {
                                                                          emphasis: {
                                                                            label: {
                                                                              show: false
                                                                            }
                                                                          }
                                                                        },
                                                                        {
                                                                          type: 'max',
                                                                          valueDim: 'highest',
                                                                          symbol: 'circle',
                                                                          symbolSize: 10,
                                                                          label: {
                                                                            show: false
                                                                          },
                                                                          emphasis: {
                                                                            label: {
                                                                              show: false
                                                                            }
                                                                          }
                                                                        }
                                                                      ],
                                                                      {
                                                                        name: 'min line on close',
                                                                        type: 'min',
                                                                        valueDim: 'close'
                                                                      },
                                                                      {
                                                                        name: 'max line on close',
                                                                        type: 'max',
                                                                        valueDim: 'close'
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                {
                                                                  name: 'MA10',
                                                                  type: 'line',
                                                                  data: calculateMA(10),
                                                                  smooth: true,
                                                                  lineStyle: {
                                                                    opacity: 0.5
                                                                  }
                                                                },
                                                                {
                                                                  name: 'MA20',
                                                                  type: 'line',
                                                                  data: calculateMA(20),
                                                                  smooth: true,
                                                                  lineStyle: {
                                                                    opacity: 0.5
                                                                  }
                                                                },
                                                                {
                                                                  name: 'MA30',
                                                                  type: 'line',
                                                                  data: calculateMA(30),
                                                                  smooth: true,
                                                                  lineStyle: {
                                                                    opacity: 0.5
                                                                  }
                                                                }
                                                              ]
                                                            };

                                                          // Display the chart using the configuration items and data just specified.
                                                          myChart.setOption(option);
                                                        </script>
                                                  </div>
                                                    <div class="tab-pane fade" id="v-profit" role="tabpanel" aria-labelledby="v-profit-tab">
                                                      <div id="statementChart"></div>
                                                        <script>
                                                            var options = {
                                                              series: [{
                                                              name: 'Income',
                                                              type: 'column',
                                                              data: [{% for report in statements %} {{report.net_profit_loss|div:1000000}}, {% endfor %}]
                                                            }, {
                                                              name: 'Cashflow',
                                                              type: 'column',
                                                              data: [{% for report in statements %} {{report.operating_cash_flow|div:1000000}}, {% endfor %}]
                                                            }, {
                                                              name: 'Revenue',
                                                              type: 'line',
                                                              data: [{% for report in statements %} {{report.total_operating_revenue|div:1000000}}, {% endfor %}]
                                                            }],
                                                              chart: {
                                                              height: 350,
                                                              type: 'line',
                                                              stacked: false
                                                            },
                                                            dataLabels: {
                                                              enabled: false
                                                            },
                                                            stroke: {
                                                              width: [1, 1, 4]
                                                            },
                                                            title: {
                                                              text: '{{ company.name }} - Financial Statement Summary',
                                                              align: 'left',
                                                              offsetX: 110
                                                            },
                                                            xaxis: {
                                                              categories: [{% for report in statements %} {{report.file.year|date:"Y"}}, {% endfor %}],
                                                            },
                                                            yaxis: [
                                                              {
                                                                axisTicks: {
                                                                  show: true,
                                                                },
                                                                axisBorder: {
                                                                  show: true,
                                                                  color: '#008FFB'
                                                                },
                                                                labels: {
                                                                  style: {
                                                                    colors: '#008FFB',
                                                                  }
                                                                },
                                                                title: {
                                                                  text: "Income (million)",
                                                                  style: {
                                                                    color: '#008FFB',
                                                                  }
                                                                },
                                                                tooltip: {
                                                                  enabled: true
                                                                }
                                                              },
                                                              {
                                                                seriesName: 'Income',
                                                                opposite: true,
                                                                axisTicks: {
                                                                  show: true,
                                                                },
                                                                axisBorder: {
                                                                  show: true,
                                                                  color: '#00E396'
                                                                },
                                                                labels: {
                                                                  style: {
                                                                    colors: '#00E396',
                                                                  }
                                                                },
                                                                title: {
                                                                  text: "Operating Cashflow (million)",
                                                                  style: {
                                                                    color: '#00E396',
                                                                  }
                                                                },
                                                              },
                                                              {
                                                                seriesName: 'Revenue',
                                                                opposite: true,
                                                                axisTicks: {
                                                                  show: true,
                                                                },
                                                                axisBorder: {
                                                                  show: true,
                                                                  color: '#FEB019'
                                                                },
                                                                labels: {
                                                                  style: {
                                                                    colors: '#FEB019',
                                                                  },
                                                                },
                                                                title: {
                                                                  text: "Revenue (million)",
                                                                  style: {
                                                                    color: '#FEB019',
                                                                  }
                                                                }
                                                              },
                                                            ],
                                                            tooltip: {
                                                              fixed: {
                                                                enabled: true,
                                                                position: 'topLeft', // topRight, topLeft, bottomRight, bottomLeft
                                                                offsetY: 30,
                                                                offsetX: 60
                                                              },
                                                            },
                                                            legend: {
                                                              horizontalAlign: 'left',
                                                              offsetX: 40
                                                            }
                                                            };

                                                            var chart = new ApexCharts(document.querySelector("#statementChart"), options);
                                                            chart.render();
                                                        </script>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                      </div>
                                        <div class="tab-pane fade pt-5" id="technical" role="tabpanel" aria-labelledby="technical-tab">
                                            <p>Technical Analysis</p>
                                            <div class="row">
                                              <div class="col-3">
                                                <div class="nav flex-column nav-pills" id="v-technical" role="tablist" aria-orientation="vertical">
                                                  <button class="nav-link active" id="v-ma-tab" data-toggle="pill" data-target="#v-ma" type="button" role="tab" aria-controls="v-ma" aria-selected="true">Moving Averages (Days)</button>
                                                  <button class="nav-link" id="v-tech-tab" data-toggle="pill" data-target="#v-tech" type="button" role="tab" aria-controls="v-tech" aria-selected="false">Technical Indicators (Days)</button>
                                                </div>
                                              </div>
                                              <div class="col-9">
                                                <div class="tab-content" id="v-technicalContent">
                                                  <div class="tab-pane fade show active" id="v-ma" role="tabpanel" aria-labelledby="v-ma-tab">
                                                      <table class="table table-striped table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>Period (Days)</th>
                                                                <th>Simple</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                          <tbody>
                                                            <tr>
                                                                <th>5</th>
                                                                <td>{{ma5.price__avg|floatformat:2}}</td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>ma10</th>
                                                                <td>{{ma5.price__avg|floatformat:2}}</td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>ma20</th>
                                                                <td>{{ma5.price__avg|floatformat:2}}</td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>50</th>
                                                                <td>{{ma50.price__avg|floatformat:2}}</td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>100</th>
                                                                <td>{{ma100.price__avg|floatformat:2}}</td>
                                                                <td></td>
                                                            </tr>
                                                        </tbody>
                                                      </table>
                                                  </div>
                                                  <div class="tab-pane fade" id="v-tech" role="tabpanel" aria-labelledby="v-tech-tab">
                                                      <table class="table table-striped table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>Name</th>
                                                                <th>Value</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                          <tbody>
                                                            <tr>
                                                                <th>RSI(14)</th>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>MACD(12,26)</th>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>ATR(14)</th>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>CCI(14)</th>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                          <tr>
                                                                <th>Highs/Lows(14)</th>
                                                                <td>{{high_14.price__max|floatformat:2}}/{{low_14.price__min|floatformat:2}}</td>
                                                                <td></td>
                                                            </tr>
                                                        </tbody>
                                                      </table>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                      </div>
                                        <div class="tab-pane fade pt-5" id="analysis" role="tabpanel" aria-labelledby="analysis-tab">                                           
                                           <div class="card-body">
                                                <div class="row pb-2">
                                                    {% for opinion in analysis %}
                                                    <div class="col-lg-6 mb-12">
                                                        <div class="card shadow">
                                                            <div class="card-body">
                                                                <div class="row no-gutters align-items-center">
                                                                    <div class="col mr-2">
                                                                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                                            {{ opinion.author}} </div>
                                                                        <div class="h5 mb-0 font-weight-bold text-gray-800">{{ new.title}}</div>
                                                                        <p>{{ opinion.opinion|truncatewords:20|linebreaks }}</p>
                                                                        <a href="{{ opinion.get_absolute_url }}" class="btn btn-primary">Read More</a>
                                                                        <p><i class="fas fa-calendar-day"></i> {{ opinion.date|naturaltime }} </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% empty %}
                                                        <p>No Analysis Available</p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                      </div>
                                      <div class="tab-pane fade pt-5" id="ownership" role="tabpanel" aria-labelledby="ownership-tab">
                                          <p><strong></strong></p>
                                          <div class="table-responsive">
                                              {% if ownership %}
                                              <h5>Largest Shareholders as at {{ ownership.date }}</h5>
                                            <table class="table table-bordered" width="50%" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th>Shareholders</th>
                                                        <th>Number of Shares</th>
                                                        <th>Percentage Holding (%)</th>
                                                    </tr>
                                                </thead>
                                                <tfoot>
                                                    <tr>
                                                        <th>Shareholders</th>
                                                        <th>Number of Shares</th>
                                                        <th>{{percent_sum__sum}} (%)</th>
                                                    </tr>
                                                </tfoot>
                                                <tbody>
                                                {% for shareholder in ownership %}
                                                    <tr>
                                                        <td>{{ shareholder.shareholder_name }}</td>
                                                        <td>{{ shareholder.shares_owned }}</td>
                                                        <td>{{ shareholder.percentage_holding }}</td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                            </table>
                                            {% else %}
                                                No Ownership Details Added Yet
                                            {% endif %}
                                        </div>
                                        </div>

                                        <div class="tab-pane fade pt-5" id="ratings" role="tabpanel" aria-labelledby="ratings-tab">
                                            {% if not reviews %}
                                                <h3>Be the first one to write a review.</h3>
                                            {% else %}
                                                <span>Overall Rating: </span><span>{{ company_rating }}</span>
                                                <br>
                                                <hr>
                                                <h3>Review Comments</h3>
                                                <ol>
                                                {% for review in reviews %}
                                                    <li class="ui list">
                                                            <span>Review comment: </span> <span>{{ review.content }}</span>
                                                            <br>
                                                            <span>Created on: </span><span>{{ review.date_created }}</span>
                                                            <br>
                                                            <span>Modified on: </span><span>{{ review.date_edited }}</span>
                                                            <br>
                                                            <span>Rating: </span><span>{{ review.rating }}</span>
                                                            <br>
                                                            <span>Creator: </span><span>{{ review.creator.username }}</span>
                                                            <br>
                                                            <a href="{% url 'review_edit' company.pk review.pk %}">Edit Review</a>
                                                    </li>
                                                {% endfor %}
                                                </ol>
                                        {% endif %}
                                        <a class="ui primary button" href="{% url 'review_create' company.pk %}" class="btn btn-primary">Add Review</a>
                                        </div>
                                        
                                        
                                    </div>
                                </div>
                            </div>

                            <!-- Basic Card Example -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Financial Statements</h6>
                                </div>
                                <div class="card-body text text-center">
                                    {% for report in reports %}
                                            <div class="col-lg-3 mb-2">
                                                <div class="card shadow">
                                                    <div class="card-body text-center">
                                                        <a href="{{report.file.url}}">{{report.year}}</a>
                                                    </div>
                                                </div>
                                            </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- Basic Card Example -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Subsidiaries</h6>
                                </div>
                                <div class="card-body">
                                    {% for subsidiary in subsidiaries  %}
                                        <p>{{ subsidiary.subsidiary_name }} ({{ subsidiary.ownership_pct }} %)</p>
                                    {% empty %}
                                        No subsidiary added yet
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- Basic Card Example -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Key People</h6>
                                </div>
                                <div class="card-body">
                                    {% for people in key_people %}
                                        <li>{{ people.position }} -
                                            {{ people.name }}  
                                        </li>
                                    {% empty %}
                                        No person listed here
                                    {% endfor %}
                                </div>
                            </div>

                        </div>

                        <div class="col-lg-4">

                            <!-- Dropdown Card Example -->
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Basic Info.</h6>
                                    <div class="dropdown no-arrow">
                                        <a class="dropdown-toggle" href="#" role="button" id="basicInfo"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                            aria-labelledby="basicInfo">
                                            <div class="dropdown-header">Dropdown Header:</div>
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <p><strong>Industry:</strong> {% for industry in company.industry.all %}<a href="{{ industry.get_absolute_url }}">{{ industry }}</a>{% endfor %}</p>
                                    <p><strong>Country:</strong> <a href="{% url 'country' company.country.slug %}">{{ company.country }}</a></p>
                                    <p><strong>Auditors:</strong> {% for auditor in auditor %}<a href="{{ auditor.get_absolute_url }}">{{ auditor.name }}</a>{% empty %}No Auditor{% endfor %}</p>
                                    <p><strong>Secretary:</strong> {% for secretary in secretaries %}{{ secretary.name }}{% empty %}No Secretary{% endfor %}</p>
                                    <p><strong>Registrar:</strong> {% for registrar in registrars %}{{ registrar.name }}{% empty %}No Registrar{% endfor %}</p>
                                    <p><strong>Registered Office:</strong> {{ company.registered_office }}</p>
                                    <p><strong>Incorporate Date:</strong> {{ company.incorporated_date }}</p>
                                </div>
                            </div>


                            <!-- Dropdown Card Example -->
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Stock Price Summary</h6>
                                    <div class="dropdown no-arrow">
                                        <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                            aria-labelledby="dropdownMenuLink">
                                            <div class="dropdown-header">Dropdown Header:</div>
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <p><strong>Previous Close: </strong>{{ company.country.currency_code }} {{ previous_close.price }}</p>
                                    <p><strong>Open:</strong> {{ company.country.currency_code }} {{ price.price }}</p>
                                    <p><strong>Volume:</strong> {{ price.volume }}</p>
                                    <p><strong>Total Traded Value:</strong> {{ company.country.currency_code }} {{ price.volume|mul:price.price }}</p>
                                    <p><strong>Market Cap:</strong> {{ company.country.currency_code }} {% for detail in share %}{{ detail.issued_shares|mul:price.price|div:1000000|floatformat:2|intcomma }}{% endfor %} million</p>
                                    <p><strong>EPS:</strong>
                                        {% if statement.net_profit_loss|div:detail.issued_shares >= 0 %}
                                            {% for detail in share %}
                                                <span class="change-up">{{ statement.net_profit_loss|div:detail.issued_shares|floatformat:4 }}</span>
                                            {% endfor %}
                                        {% else %}
                                            {% for detail in share %}
                                                <span class="change-down">{{ statement.net_profit_loss|div:detail.issued_shares|floatformat:4 }}</span>
                                            {% endfor %}
                                        {% endif %}
                                    </p>
                                    <p><strong>YTD(%):</strong>
                                        {% if price.price|sub:price_year_start.price|mul:100|div:price_year_start.price >= 0 %}
                                            {% if price.price|sub:price_year_start.price|mul:100|div:price_year_start.price > 0 %}
                                                <span class="change-up">{{ price.price|sub:price_year_start.price|mul:100|div:price_year_start.price|floatformat:2}}</span>
                                            {% else %}
                                                <span class="change-none">{{ price.price|sub:price_year_start.price|mul:100|div:price_year_start.price|floatformat:2}}</span>
                                            {% endif %}
                                        {% else %}
                                            <span class="change-down">{{ price.price|sub:price_year_start.price|mul:100|div:price_year_start.price|floatformat:2}}</span>
                                        {% endif %}
                                    </p>
                                    <p><strong>1-Year Change:</strong>
                                        {% if price.price|sub:price_year_start.price >= 0 %}
                                            <span class="change-up">{{ company.country.currency_code }} {{ price.price|sub:price_year_start.price|floatformat:2}}</span>
                                        {% else %}
                                            <span class="change-down">{{ company.country.currency_code }} {{ price.price|sub:price_year_start.price|floatformat:2}}</span>
                                        {% endif %}
                                    </p>
                                    <p><strong>Shares Outstanding:</strong> {% for detail in share %} {{ detail.issued_shares|intcomma }}{% endfor %}</p>
                                </div>
                            </div>

                            <!-- Dropdown Card Example -->
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Latest Press Releases</h6>
                                    <div class="dropdown no-arrow">
                                        <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                            aria-labelledby="dropdownMenuLink">
                                            <div class="dropdown-header">Press Releases:</div>
                                            <a class="dropdown-item" href="{% url 'company_press_details' company.id %}">All Press Releases</a>
                                        </div>
                                    </div>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <div class="text">
                                        {% for press in release %}
                                            <p><img src="{% static 'img/pdf.png' %}" alt="" height="30"><a href="{{ press.file.url }}" target="_blank"> {{ press.title }} <small>[{{ press.date|date:"d/m/Y" }}]</small></a><i class="fas fa-download"></i></p>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>

                            <!-- Collapsable Card Example -->
                            <div class="card shadow mb-4">
                                <!-- Card Header - Accordion -->
                                <a href="#collapse1" class="d-block card-header py-3" data-toggle="collapse"
                                    role="button" aria-expanded="true" aria-controls="collapseCardExample">
                                    <h6 class="m-0 font-weight-bold text-primary">Stock Price History</h6>
                                </a>
                                <!-- Card Content - Collapse -->
                                <div class="collapse show" id="collapse1">
<!--                                    <div class="card-body">-->
<!--                                        <table>-->
<!--                                            {% for price in share_price %}-->
<!--                                                <li>{{ price.date }} - {{ price.price }}</li>-->
<!--                                            {% endfor %}-->
<!--                                        </table>-->
<!--                                    </div>-->

                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-striped table-hover" id="dataTable" width="70%" cellspacing="0">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Close</th>
                                                    <th>Volume</th>
                                                </tr>
                                            </thead>
<!--                                            <tfoot>-->
<!--                                                <tr>-->
<!--                                                    <th>Date</th>-->
<!--                                                    <th>Close</th>-->
<!--                                                    <th>Volume</th>-->
<!--                                                </tr>-->
<!--                                            </tfoot>-->
                                            <tbody>
                                            {% for price in share_price %}
                                                <tr>
                                                    <td>{{ price.date|date:"Y/m/d" }}</td>
                                                    <td>{{ price.price }}</td>
                                                    <td>{{ price.volume }}</td>
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                        </table>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="card shadow mb-4">
                                <!-- Card Header - Accordion -->
                                <a href="#collapse2" class="d-block card-header py-3" data-toggle="collapse"
                                    role="button" aria-expanded="true" aria-controls="collapseCardExample">
                                    <h6 class="m-0 font-weight-bold text-primary">Share Listing Details</h6>
                                </a>
                                <!-- Card Content - Collapse -->
                                <div class="collapse show" id="collapse2">
                                    <div class="card-body">
                                        {% for detail in share %}
                                        <p><strong>Issued Shares:</strong> {{ detail.issued_shares|intcomma }}</p>
                                        {% if detail.stated_capital%} <p><strong>Stated Capital:</strong> {{ detail.stated_capital|intcomma }}</p> {% endif %}
                                        {% if detail.listed_date%} <p><strong>Listed Date:</strong> {{ detail.listed_date }}</p> {% endif %}
                                        {% if detail.financial_period_ends%} <p><strong>Financial Year Ends:</strong> {{ detail.financial_period_ends }}</p> {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                            <div class="card shadow mb-4">
                                <!-- Card Header - Accordion -->
                                <a href="#collapse3" class="d-block card-header py-3" data-toggle="collapse"
                                    role="button" aria-expanded="true" aria-controls="collapseCardExample">
                                    <h6 class="m-0 font-weight-bold text-primary">Latest Dividend</h6>
                                </a>
                                <!-- Card Content - Collapse -->
                                <div class="collapse show" id="collapse3">
                                    <div class="card-body">
                                        {% for dividend in dividends %}
                                            <p><strong>Final Dividend:</strong> GHS {{ dividend.final_dividend|floatformat:2 }} </p>
                                            <p><strong>File:</strong><a href="{{ dividend.file.url }}" target="_blank"> Dividend File</a> <i class="fas fa-download"></i></p>
                                            <p><strong>Qualifying Date:</strong> {{ dividend.qualifying_date }} </p>
                                            <p><strong>Register Closure:</strong> {{ dividend.register_closure }}</p>
                                            <p><strong>Ex Dividend Date:</strong> {{ dividend.ex_dividend_date }}</p>
                                            <p><strong>Payment Date:</strong> {{ dividend.payment_date }}</p>
                                            <p><strong>AGM Date:</strong> {{ dividend.agm }}</p>

                                            <h6></h6><a href="{% url 'company_dividend_details' company.id %}">Dividends & Splits Page</a></h6>
                                        {% empty %}
                                            <p><strong>{{ company.company_id }} is yet to pay dividend</strong></p>
                                        {% endfor %}
                                        

                                        
                                    </div>
                                </div>
                            </div>

                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Listing Information</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    {% for ipo in ipos %}
                                        <p><strong>Prospectus:</strong><a href="{{ ipo.prospectus.url }}" target="_blank"> Prospectus  </a><i class="fas fa-download"></i></p>
                                        <p><strong>First Trading Date:</strong> {{ ipo.ipo_date }} </p>
                                        <p><strong>IPO Share Price:</strong> GHS {{ ipo.ipo_price }}</p>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Contact Information</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <p><strong>Telephone:</strong> {{ company.telephone }}</p>
                                    <p><strong>Email:</strong> {{ company.email }}</p>
                                    <p><strong>Website:</strong> {{ company.website }}</p>
                                </div>
                            </div>

                        </div>

                    </div>

                </div>
                <!-- /.container-fluid -->

{% endblock %}
{% block script %}
<!-- Page level plugins -->
    <script src="{% static 'vendor/datatables/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>

    <!-- Page level custom scripts -->
    <script src="{% static 'js/demo/datatables-demo.js' %}"></script>
{% endblock %}